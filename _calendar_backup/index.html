<!DOCTYPE html>
<!--
	To Do:
		- Get fix for feb days of week leap year
		- Click on "[Month] [Year]" to get months view
			- Click again, on "[year]" to view years
				- Click again "[year] - [year]" to view decades
		- Once finished move to main page
-->

<html>
	<head>
		<style type="text/css">
			*{
				font-family: monospace;

			}
			body{
				background-color: lightblue;
			}
			#a1{
				user-select: none;  
				position: absolute;
				background-color: white;
				height: 270px;
				width: 300px;
				bottom: 200px;
				left: 50%;
				box-shadow: 0px 1px 5px grey;
			}
			#a2{
				position: absolute;
				background-color: white;
				height: 181px;
				width: 218px;
				left: 42px;
			}
			#a3{
				width: 100%;
				height: 50px;
				background-color: white;
				text-align: center;
				line-height: 50px;
				border-bottom: 1px solid lightgrey;
			}
			
			.smalls{
				position: relative;
				height: 25px;
				width: 25px;
				/*box-shadow: 0px 1px 2px lightgrey;*/
				background-color: white;
				text-align: center;
				line-height: 25px;
				display: inline-block;
				margin-top:5px; 
			}
			.smalls:hover{
				background-color: grey;
				color: white;
				box-shadow: 0px 1px 2px grey;
			}
			.smalls:active{
				background-color: black;
			}
		</style>
	</head>
	<body>
		<div id="a1">
			<div id="a2">
				<div class="smalls" id="0" onclick="monthChange(1)" style="position: absolute;top:7px;"><</div>
				<div id="a3"><span>January 2020</span></div>
				<div class="smalls" id="0" onclick="monthChange(2)" style="position: absolute;top:7px;left: 193px;">></div>

				<div class="smalls" onclick="nextCheck(this)" id="0">Mo</div>
				<div class="smalls" onclick="nextCheck(this)" id="0">Tu</div>
				<div class="smalls" onclick="nextCheck(this)" id="0">We</div>
				<div class="smalls" onclick="nextCheck(this)" id="0">Th</div>
				<div class="smalls" onclick="nextCheck(this)" id="0">Fr</div>
				<div class="smalls" onclick="nextCheck(this)" id="0">Sa</div>
				<div class="smalls" onclick="nextCheck(this)" id="0">Su</div>

				<div class="smalls" onclick="nextCheck(this)" id="1">1</div>
				<div class="smalls" onclick="nextCheck(this)" id="2">2</div>
				<div class="smalls" onclick="nextCheck(this)" id="3">3</div>
				<div class="smalls" onclick="nextCheck(this)" id="4">4</div>
				<div class="smalls" onclick="nextCheck(this)" id="5">5</div>
				<div class="smalls" onclick="nextCheck(this)" id="6">6</div>
				<div class="smalls" onclick="nextCheck(this)" id="7">7</div>
				<div class="smalls" onclick="nextCheck(this)" id="8">8</div>
				<div class="smalls" onclick="nextCheck(this)" id="9">9</div>
				<div class="smalls" onclick="nextCheck(this)" id="10">10</div>

				<div class="smalls" onclick="nextCheck(this)" id="11">11</div>
				<div class="smalls" onclick="nextCheck(this)" id="12">12</div>
				<div class="smalls" onclick="nextCheck(this)" id="13">13</div>
				<div class="smalls" onclick="nextCheck(this)" id="14">14</div>
				<div class="smalls" onclick="nextCheck(this)" id="15">15</div>
				<div class="smalls" onclick="nextCheck(this)" id="16">16</div>
				<div class="smalls" onclick="nextCheck(this)" id="17">17</div>
				<div class="smalls" onclick="nextCheck(this)" id="18">18</div>
				<div class="smalls" onclick="nextCheck(this)" id="19">19</div>
				<div class="smalls" onclick="nextCheck(this)" id="20">20</div>

				<div class="smalls" onclick="nextCheck(this)" id="21">21</div>
				<div class="smalls" onclick="nextCheck(this)" id="22">22</div>
				<div class="smalls" onclick="nextCheck(this)" id="23">23</div>
				<div class="smalls" onclick="nextCheck(this)" id="24">24</div>
				<div class="smalls" onclick="nextCheck(this)" id="25">25</div>
				<div class="smalls" onclick="nextCheck(this)" id="26">26</div>
				<div class="smalls" onclick="nextCheck(this)" id="27">27</div>
				<div class="smalls" onclick="nextCheck(this)" id="28">28</div>
				<div class="smalls" onclick="nextCheck(this)" id="29">29</div>
				<div class="smalls" onclick="nextCheck(this)" id="30">30</div>

				<div class="smalls" onclick="nextCheck(this)" id="31">31</div>
				<div class="smalls" onclick="nextCheck(this)" id="32">32</div>
				<div class="smalls" onclick="nextCheck(this)" id="33">33</div>
				<div class="smalls" onclick="nextCheck(this)" id="34">34</div>
				<div class="smalls" onclick="nextCheck(this)" id="35">35</div>

				<div class="smalls" onclick="nextCheck(this)" id="36">36</div>
				<div class="smalls" onclick="nextCheck(this)" id="37">37</div>
				<div class="smalls" onclick="nextCheck(this)" id="38">38</div>
				<div class="smalls" onclick="nextCheck(this)" id="39">39</div>
				<div class="smalls" onclick="nextCheck(this)" id="40">40</div>
				<div class="smalls" onclick="nextCheck(this)" id="41">41</div>
				<div class="smalls" onclick="nextCheck(this)" id="42">42</div>
			</div>
		</div>
		
	</body>
	<script type="text/javascript">
		var year=2020;
		var months = ["January","February","March","April","May","June","July","August","September","October","November","December"];
		var monthsDays = [31,29,31,30,31,30,31,31,30,31,30,31];
		var counter=0;
		getDate();
		var realWeekday;
		var realDay;
		var realMonth;
		var realYear;
		var dayNum;

		var i0;
		var goBackDay;  //delete/unused?
		var i1;
		var iv;
		var ivCount=1;
		var prevMonthCount;
		var prevCounter;
		var dayEnd;
		function getDate(){
			now = new Date();
			realWeekday = new Intl.DateTimeFormat('default',
			        {
			            weekday: 'short'
			        }).format(now);
			realDay = new Intl.DateTimeFormat('default',
			        {
			            day: 'numeric',
			        }).format(now);
			realMonth = new Intl.DateTimeFormat('default',
			        {
			            month: 'numeric',
			        }).format(now);
			realYear = new Intl.DateTimeFormat('default',
			        {
			        	year: 'numeric',
			        }).format(now);
		}
		function initalizeDate(){
			year = parseInt(realYear);
			document.getElementById("a3").innerHTML=months[parseInt(realMonth)-1]+" "+year;
			counter=parseInt(realMonth)-1;

			switch(realWeekday) {
			  case "Mon":
			    dayNum=1;
			    break;
			  case "Tue":
			    dayNum=2;	
			    break;
			  case "Wed":
			    dayNum=3;	
			    break;
			  case "Thu":
			    dayNum=4;	
			    break;
			  case "Fri":
			    dayNum=5;	
			    break;
			  case "Sat":
			    dayNum=6;	
			    break;
			  case "Sun":
			    dayNum=7;	
			    break;  
			}
			
			for (i0 = realDay; i0 > 0; i0--) {
			  	dayNum=dayNum-1;
			  	if (dayNum==0) {dayNum=7;}
			}
			//for 1 to 40 if above daynum, set black, otherwise grey
			
			if (counter==1) {prevCounter=12;}else{prevCounter=counter;}
			prevMonthCount=monthsDays[prevCounter];

			for (iv = 1; iv <43; iv++) {
			  	if (iv < parseInt(dayNum)+1) {
			  		document.getElementById(iv).style.color="#eaeaea";
			  		document.getElementById(iv).innerHTML=(monthsDays[prevCounter])-((parseInt(dayNum))-iv);

			  	}else{
			  		//dayNum+1 = new var 1; new var++
			  		document.getElementById(iv).innerHTML=ivCount;
			  		document.getElementById(iv).style.color="black";
			  		ivCount=ivCount+1;
			  	}
			}
			for (i1 = monthsDays[counter]+parseInt(dayNum)+1; i1 < 43; i1++) {
			  	document.getElementById(i1).style.color="lightgrey";
			  	document.getElementById(i1).innerHTML=i1-monthsDays[counter]-parseInt(dayNum);
			}
			document.getElementById(parseInt(realDay)+2).style.backgroundColor="lightgrey";

			dayEnd=dayNum;
			for (var i = dayNum; i < ivCount; i++) {
				dayEnd=dayEnd+1;
				if (dayEnd==8) {dayEnd=1;}//day of the week 
			}
		}

		var currentMonth=realMonth;
		function monthChange(LorR) {

		var beforeCounter=1;
		var dayCounter=1;
		var afterCounter=1;
		var backChkCompare=1;
		var back2FwrdCompare=1;
		var backChk=1;
		var aa=1;
		
			if (LorR==1) {
				if (counter!==0) { //press backward arrow
					counter=counter-1;
				}else{counter=11;year=year-1;}
				document.getElementById("a3").innerHTML=months[counter]+" "+year;
 				
 				currentMonth=parseInt(currentMonth)-1; //go back to dec when 0
				if (currentMonth==0) {currentMonth=12;}
				var currentMonth2 = currentMonth-1;
				if (currentMonth2==0) {currentMonth2=12;}	

							for (var backChk = 1; backChk < 43; backChk++) {
								if (parseInt(document.getElementById(backChk).innerHTML)>backChkCompare) {
									backChkCompare=document.getElementById(backChk).innerHTML;
								}else{break;}
							}
							backChk2=backChk;
							for (var back2Fwrd = 1; back2Fwrd < monthsDays[currentMonth-1]; back2Fwrd++) {
								backChk2=backChk2-1;
								if (backChk2==1) {backChk2=8;};
							}
				
				beforeCounter=(monthsDays[currentMonth2-1])-backChk2+3; 
				if (backChk2-1==1) {backChk2=9;} //if at 1, move to next week
				for (var i = 1; i <43; i++) { //going from back to forwards = broken
					if (i<backChk2-1) {
						document.getElementById(i).style.color="lightgrey"; //lightgrey //before
						document.getElementById(i).innerHTML=beforeCounter;
						beforeCounter=beforeCounter+1;
						aa=aa+1;
					}
					else if (i-backChk2+2 > monthsDays[currentMonth-1]) {
						document.getElementById(i).style.color="lightgrey"; //light grey //after
						document.getElementById(i).innerHTML=afterCounter;
						afterCounter=afterCounter+1;
					}
					else {
						document.getElementById(i).style.color="black"; //black //middle (real)
						document.getElementById(i).innerHTML=dayCounter;
						dayCounter=dayCounter+1;
						aa=aa+1;
					}if(aa==8){aa=1};
					
				}dayEnd=aa;
				//day end = before coutner for back

			}else{ //press forward arrow
				if (counter!==11) { //if not end of year
					counter=counter+1;
				}else{counter=0;year=year+1;}
				document.getElementById("a3").innerHTML=months[counter]+" "+year;
				aa=1;
				beforeCounter=(monthsDays[currentMonth-1])-(dayEnd-3);
				currentMonth=parseInt(currentMonth)+1;
				if (currentMonth==13) {currentMonth=1;}

					if (dayEnd==1) {dayEnd=8;beforeCounter=beforeCounter-8;}
				for (var i = 1; i <43; i++) {
					if (i<dayEnd) {
						document.getElementById(i).style.color="lightgrey";
						document.getElementById(i).innerHTML=beforeCounter-1;
						beforeCounter=beforeCounter+1;
						aa=aa+1;
					}
					else if (i-dayEnd+1 > monthsDays[currentMonth-1]) {
						document.getElementById(i).style.color="lightgrey";
						document.getElementById(i).innerHTML=afterCounter;
						afterCounter=afterCounter+1;
						
					}
					else {
						document.getElementById(i).style.color="black";
						document.getElementById(i).innerHTML=dayCounter;
						dayCounter=dayCounter+1;
						aa=aa+1;
					}if(aa==8){aa=1}

				}
				dayEnd=aa;//day end = before coutner for back
			}
		}

		function nextCheck(that){ //go to next if it's apart of next
			if (that.id>monthsDays[counter]-1) {
				monthChange(2);
			}
		}

		initalizeDate();
	</script>
</html>